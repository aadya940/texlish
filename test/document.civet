{ testCase } from ./helper.civet

describe '\\begin/\\end{document}', ->
  testCase '''
    add around text
    ---
    Hello, world!
    ---

    \\begin{document}
    Hello, world!
    \\end{document}

  ''', fragment: false

  testCase '''
    existing braced end
    ---
    \\end{document}
    Hello, world!
    ---

    \\begin{document}
    \\end{document}
    Hello, world!
  ''', fragment: false

  testCase '''
    existing braced end with space
    ---
    \\end {document}
    Hello, world!
    ---

    \\begin{document}
    \\end {document}
    Hello, world!
  ''', fragment: false

  testCase '''
    existing begin colon
    ---
    \\begin: document
    Hello, world!
    ---
    \\begin{document}%
    Hello, world!
    \\end{document}

  ''', fragment: false

  testCase '''
    existing end colon
    ---
    \\end: document
    Hello, world!
    ---

    \\begin{document}
    \\end{document}%
    Hello, world!
  ''', fragment: false

  testCase '''
    existing environment
    ---
    > document
      Hello, world!
    ---
    \\begin{document}
      Hello, world!
    \\end{document}
  ''', fragment: false

  testCase '''
    begin placement
    ---
    % comment
      % comment
    \\usepackage{foo}
    >> use foo
    \\foo
      {bar}
    # Hello
    ---
    % comment
      % comment
    \\usepackage{foo}
    \\usepackage{foo}
    \\foo
      {bar}

    \\begin{document}
    \\section{Hello}
    \\end{document}

  ''', fragment: false

  testCase '''
    begin placement before environment
    ---
    > theorem
    ---

    \\begin{document}
    \\begin{theorem}
    \\end{theorem}
    \\end{document}

  ''', fragment: false

  testCase '''
    begin placement before list
    ---
    * hi
    ---

    \\begin{document}
    \\begin{itemize}
    \\item hi
    \\end{itemize}
    \\end{document}

  ''', fragment: false

  testCase '''
    begin placement before \\maketitle
    ---
    \\maketitle
    Hello
    ---

    \\begin{document}
    \\maketitle
    Hello
    \\end{document}

  ''', fragment: false

  testCase '''
    existing \\title and \\maketitle
    ---
    \\title{Title}
    \\maketitle
    Hello
    ---
    \\title{Title}

    \\begin{document}
    \\maketitle
    Hello
    \\end{document}

  ''', fragment: false

  testCase '''
    \\title and no \\maketitle
    ---
    \\title{Title}
    Hello
    ---
    \\title{Title}

    \\begin{document}
    \\maketitle
    Hello
    \\end{document}

  ''', fragment: false

  testCase '''
    \\title and existing document
    ---
    \\title{Title}
    \\begin{document}
    Hello
    \\end{document}
    ---
    \\title{Title}
    \\begin{document}
    Hello
    \\end{document}
  ''', fragment: false
